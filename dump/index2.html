<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bahay Pare National High School</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <style>
      :root {
        --accent: rgb(13 110 253 / 0%);
        --accent-strong: rgba(13, 110, 253, 0.65);
      }
      body {
        box-sizing: border-box;
        background-color: #f8f9fa;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      #FC1,
      #p11 {
        fill: #28a745 !important; /* Green for Faculty */
      }

      #overlay polygon {
        fill: var(--accent);
        stroke-width: 2;
        cursor: pointer;
        transition: fill 0.15s ease;
        pointer-events: all;
      }
      #overlay polygon:hover {
        fill: var(--accent-strong);
      }

      .header-section {
        background: linear-gradient(135deg, #2c3e50, #3498db);
        color: white;
        padding: 1rem 0;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .search-container {
        background: white;
        border-radius: 12px;
        padding: 0.5rem;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .search-input {
        border: none;
        outline: none;
        padding: 0.75rem 1rem;
        font-size: 1rem;
        border-radius: 8px;
      }

      .search-btn {
        background: #3498db;
        border: none;
        border-radius: 8px;
        padding: 0.75rem 1.25rem;
        color: white;
        transition: all 0.3s ease;
      }

      .search-btn:hover {
        background: #2980b9;
        transform: translateY(-1px);
      }

      .map-container {
        background: white;
        border-radius: 15px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        margin: 1rem 0;
        min-height: 400px;
        position: relative;
      }

      .map-placeholder {
        width: 100%;
        height: 400px;
        background: linear-gradient(45deg, #ecf0f1, #bdc3c7);
        display: flex;
        align-items: center;
        justify-content: center;
        color: #7f8c8d;
        font-size: 1.1rem;
        border: 2px dashed #95a5a6;
        position: relative;
      }

      .directions-panel {
        background: white;
        border-radius: 15px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        padding: 1.5rem;
        margin: 1rem 0;
        max-height: 500px;
        overflow-y: auto;
      }

      .direction-item {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 1rem;
        margin-bottom: 0.75rem;
        border-left: 4px solid #3498db;
        transition: all 0.3s ease;
      }

      .direction-item:hover {
        background: #e9ecef;
        transform: translateX(5px);
      }

      .direction-number {
        background: #3498db;
        color: white;
        border-radius: 50%;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        margin-right: 1rem;
        flex-shrink: 0;
      }

      .student-result {
        background: white;
        border-radius: 10px;
        padding: 1rem;
        margin: 0.5rem 0;
        border: 1px solid #e9ecef;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .student-result:hover {
        background: #f8f9fa;
        border-color: #3498db;
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(52, 152, 219, 0.2);
      }

      .room-badge {
        background: #e74c3c;
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: 500;
      }

      .no-results {
        text-align: center;
        color: #7f8c8d;
        padding: 2rem;
        font-style: italic;
      }

      .panel-header {
        color: #2c3e50;
        font-weight: 600;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #ecf0f1;
      }

      @media (max-width: 768px) {
        .map-placeholder {
          height: 300px;
          font-size: 1rem;
        }

        .directions-panel {
          max-height: 300px;
        }

        .search-input {
          font-size: 16px; /* Prevents zoom on iOS */
        }
      }
    </style>
  </head>
  <body>
    <div class="header-section">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-12">
            <h1 class="h4 mb-3 text-center">
              <i class="bi bi-geo-alt-fill me-2"></i>
              Bahay Pare National High School
            </h1>

            <!-- Search Bar -->
            <div class="search-container">
              <div class="input-group">
                <input
                  type="text"
                  class="form-control search-input"
                  id="studentSearch"
                  placeholder="Search for student name..."
                  autocomplete="off"
                />
                <button class="btn search-btn" type="button" id="searchBtn">
                  <i class="bi bi-search"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-fluid px-3">
      <div class="row">
        <!-- Map Section -->
        <div class="col-lg-8 col-12">
          <div
            class="map-container"
            style="position: relative; max-width: 100%; overflow: visible"
          >
            <img
              id="school-map"
              src="school-map.png"
              alt="School map"
              style="
                display: block;
                width: 100%;
                height: auto;
                max-width: 100%;
                border-radius: 4px;
              "
              usemap="#image-map"
            />

            <!-- Tooltip for polygon hover -->
            <div
              class="tooltip"
              id="tooltip"
              style="
                position: absolute;
                pointer-events: none;
                background: rgba(13, 110, 253, 0.9);
                color: #fff;
                padding: 6px 8px;
                border-radius: 6px;
                font-size: 13px;
                transform: translate(-6px, -40px);
                white-space: nowrap;
                z-index: 10;
                display: none;
              "
            ></div>

            <!-- SVG overlay, viewBox set dynamically to image's natural size -->
            <svg
              id="overlay"
              viewBox="0 0 100 100"
              preserveAspectRatio="xMinYMin meet"
              aria-hidden="true"
              style="
                position: absolute;
                top: 0;
                left: 0;
                pointer-events: auto;
                z-index: 4;
              "
            >
              <polygon
                id="p1"
                points="77.7322 196.376 213.764 151.373 239.333 225.014 96.1424 272.063"
                data-title="Room 1"
              ></polygon>
              <polygon
                id="p2"
                points="90.0057 272.063 247.516 222.969 259.789 316.043 97.1652 338.544"
                data-title="SHS Court"
              ></polygon>
              <polygon
                id="p3"
                points="103.302 339.567 256.721 317.066 268.994 396.843 115.576 415.254"
                data-title="Room 3"
              ></polygon>
              <polygon
                id="p4"
                points="98.188 419.345 275.131 404.003 281.268 479.689 106.37 495.031"
                data-title="Room 4"
              ></polygon>
              <polygon
                id="p5"
                points="281.268 411.162 397.866 401.957 400.934 470.484 294.564 474.576"
                data-title="Room 5"
              ></polygon>
              <polygon
                id="p6"
                points="288.427 362.068 416.276 349.795 419.345 399.912 286.382 411.162"
                data-title="Room 6"
              ></polygon>
              <polygon
                id="p7"
                points="275.131 306.838 390.707 293.541 392.752 350.818 280.245 360.023"
                data-title="Room 7"
              ></polygon>
              <polygon
                id="p8"
                points="252.63 149.328 401.957 103.302 424.459 178.989 277.177 223.991"
                data-title="Room 8"
              ></polygon>
              <polygon
                id="p9"
                points="463,648,705,633,718,704,470,721"
                data-title="Room 9"
              ></polygon>
              <polygon
                id="p10"
                points="437.755 94.0969 584.014 42.9573 611.63 111.484 462.302 160.578"
                data-title="Room 10"
              ></polygon>
              <polygon
                id="p11"
                points="614.698 70.5726 754.82 32.7293 773.231 80.8006 634.131 123.758"
                data-title="Room 11"
              ></polygon>
              <polygon
                id="p12"
                points="411.162 415.254 580.946 404.003 594.242 455.142 413.208 468.439"
                data-title="Room 12"
              ></polygon>
              <polygon
                id="p13"
                points="704.704 397.866 880.624 380.479 890.852 430.595 712.886 445.937"
                data-title="Room 13"
              ></polygon>
              <polygon
                id="p14"
                points="984.949 416.276 1049.38 405.026 969.607 22.5014 907.217 31.7066"
                data-title="Room 14"
              ></polygon>
              <polygon
                id="FC1"
                points="18.4103 201.49 74.6638 198.422 91.0285 307.86 29.661 316.043"
                data-title="New Faculty"
              ></polygon>
              <g id="labels"></g>
            </svg>
          </div>
        </div>

        <!-- Directions Panel -->
        <div class="col-lg-4 col-12">
          <!-- Search Results -->
          <div
            class="directions-panel"
            id="searchResults"
            style="display: none"
          >
            <h5 class="panel-header">
              <i class="bi bi-person-search me-2"></i>
              Search Results
            </h5>
            <div id="resultsContainer"></div>
          </div>

          <!-- Directions -->
          <div class="directions-panel" id="directionsPanel">
            <h5 class="panel-header">
              <i class="bi bi-signpost-2 me-2"></i>
              Directions
            </h5>
            <div id="directionsContainer">
              <div class="no-results">
                <i class="bi bi-arrow-right-circle display-6 mb-3"></i>
                <div>Select a student to see directions to their classroom</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/image-map-resizer@1.0.10/js/imageMapResizer.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
  </body>
</html>
